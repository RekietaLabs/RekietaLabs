<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashier POS - RekietaLabs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: white;
            text-align: center;
        }
        .hidden { display: none; }
        .container { max-width: 800px; margin: auto; padding: 20px; }
        .pin-screen, .pos-screen { display: flex; flex-direction: column; align-items: center; }
        input, button, select {
            margin: 10px; padding: 10px; font-size: 16px; border-radius: 5px; border: none;
        }
        button {
            background-color: #be9f13; color: white; cursor: pointer;
        }
        button:hover { opacity: 0.8; }
        .grid {
            display: flex; width: 100%;
        }
        .left-panel { width: 50%; padding: 10px; }
        .right-panel {
            width: 50%;
            padding: 10px;
            background-color: #1e1e1e;
            border-radius: 10px;
        }
        .item-button {
            display: inline-block;
            width: 100px;
            height: 100px;
            margin: 5px;
            background-color: #be9f13;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
        }
        .qr-container {
            margin-top: 20px;
        }
        #qr-code {
            background: white;
            padding: 10px;
            border-radius: 10px;
        }
    </style>
</head>
<body>

    <!-- Store PIN Screen -->
    <div class="container pin-screen" id="pin-screen">
        <h2>Enter Store PIN</h2>
        <input type="password" id="store-pin" placeholder="Enter PIN">
        <button onclick="checkPIN()">Login</button>
    </div>

    <!-- Cashier UI -->
    <div class="container pos-screen hidden" id="pos-screen">
        <h1>RekietaLabs POS</h1>
        <label for="terminal-select">Select Terminal:</label>
        <select id="terminal-select">
            <option value="">Choose Terminal</option>
            <option value="1">Terminal 1</option>
            <option value="2">Terminal 2</option>
            <option value="3">Terminal 3</option>
            <option value="4">Terminal 4</option>
            <option value="5">Terminal 5</option>
        </select>

        <div class="grid">
            <div class="left-panel">
                <h3>Items</h3>
                <button class="item-button" onclick="addItem('Item A', 5.99)">Item A</button>
                <button class="item-button" onclick="addItem('Item B', 3.49)">Item B</button>
                <button class="item-button" onclick="addItem('Item C', 7.25)">Item C</button>
                <button onclick="addCustomAmount()">Custom Amount</button>
            </div>
            <div class="right-panel">
                <h3>Cart</h3>
                <ul id="cart"></ul>
                <h2>Total: $<span id="total">0.00</span></h2>
                <button onclick="processSale()">Send Sale</button>
            </div>
        </div>

        <!-- QR Code Display -->
        <div class="qr-container hidden" id="qr-container">
            <h3>Scan for Receipt</h3>
            <canvas id="qr-code"></canvas>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator/qrcode.min.js"></script>
    <script>
        let total = 0;
        let cartItems = [];

        function checkPIN() {
            const pin = document.getElementById("store-pin").value;
            if (pin === "2687" || pin === "4646") {
                document.getElementById("pin-screen").classList.add("hidden");
                document.getElementById("pos-screen").classList.remove("hidden");
            } else {
                alert("Invalid PIN!");
            }
        }

        function addItem(name, price) {
            cartItems.push({ name, price });
            total += price;
            updateCart();
        }

        function addCustomAmount() {
            const amount = parseFloat(prompt("Enter amount:"));
            if (!isNaN(amount) && amount > 0) {
                addItem("Custom Amount", amount);
            }
        }

        function updateCart() {
            const cartList = document.getElementById("cart");
            cartList.innerHTML = "";
            cartItems.forEach(item => {
                const li = document.createElement("li");
                li.textContent = `${item.name} - $${item.price.toFixed(2)}`;
                cartList.appendChild(li);
            });
            document.getElementById("total").textContent = total.toFixed(2);
        }

        function processSale() {
            if (cartItems.length === 0) return alert("Cart is empty!");
            const orderNumber = Math.floor(100000 + Math.random() * 900000);
            alert(`Order ${orderNumber} processed!`);
            
            // Generate QR Code
            const qrContainer = document.getElementById("qr-container");
            qrContainer.classList.remove("hidden");

            const qr = qrcode(0, 'L');
            qr.addData(`https://rekietalabs.com/receipt?ordernumber=${orderNumber}`);
            qr.make();
            document.getElementById("qr-code").innerHTML = qr.createImgTag();
        }
    </script>

</body>
</html>
